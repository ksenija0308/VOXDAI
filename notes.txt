Organization fields:
Profile photo
Full Name
Professional headline
Topic (example: Marketing, Sales, Artificial Intelligence, can be custom)
Speaking format (example, keynote, workshop etc)
Years of speaking experience
Number of Past Speaking Engagements (optional)
Notable Clients or Events (optional)
Video introduction (url/upload file/record now)
Geographic Reach
Preferred Event Types
Availability Periods

Issue
- after successfull onboarding when click on Go to Dashboard it redirect to onboarding step 1

I previously used Supabase Cloud, but now my team migrated to self-hosted Supabase (Docker on a VPS). I need you to rewrite my React (Vite) frontend Supabase integration to target the self-hosted instance while keeping “Option 1: client calls Supabase directly with RLS” (no Edge Functions).

Goal
- Update environment variables and Supabase client initialization to work with self-hosted Supabase (I added SUPABASE_URL ans SUPABASE_ANON_KEY).
- Ensure auth, DB CRUD, and Storage uploads work against the self-hosted gateway URL.
- Do NOT introduce any backend endpoints or Edge Functions.

Self-hosted specifics
- Kong gateway (Supabase API base) is:
  - http://167.172.185.237:8000

What you must produce
1) Vite environment setup
- Provide an .env.example snippet using ONLY:
  - VITE_SUPABASE_URL=http://167.172.185.237:8000
  - VITE_SUPABASE_ANON_KEY=<paste anon key>
- Remove any old Supabase Cloud variables (PROJECT_ID, API_BASE_URL, etc.).

2) Supabase client initialization (TypeScript)
- Create or update: src/lib/supabaseClient.ts
- Use createClient from @supabase/supabase-js with:
  - import.meta.env.VITE_SUPABASE_URL
  - import.meta.env.VITE_SUPABASE_ANON_KEY
- Add a runtime guard that throws a helpful error if env vars are missing.
- Ensure no service key is referenced anywhere.

3) Storage helpers (TypeScript)
- Create: src/lib/storage.ts
- Bucket is: profile-media (private)
- Provide helpers:
  - uploadToProfileMedia({ userId, file, prefix }): returns storage path string
    - paths: `${userId}/profile/<timestamp>.<ext>` for photos and `${userId}/intro/<timestamp>.<ext>` for videos
  - getSignedUrl(path, expiresSeconds=600): returns signedUrl
- IMPORTANT: never store signed URLs in DB; store only storage paths.

4) Profile API rewrite (TypeScript)
- Create: src/features/profile/api.ts
- Implement:
  - fetchOrganizationProfile(): reads organization_profiles where id = auth user id
  - saveOrganizationProfile(payload):
    - supabase.auth.getUser()
    - upsert into user_profiles { id, user_type:'organization' }
    - optionally upload files; then upsert organization_profiles with storage paths and form fields
- Use upsert (include PK) and handle errors.
- Keep types strict and explicit.

Organization fields to support now
- Profile photo (file)
- Full Name (required)
- Professional headline
- Topics: string[]
- Speaking formats: string[]
- Years of speaking experience: string (options: "0-1","1-3","3-5","5-10","10+")
- Past engagements: number | null
- Notable clients/events: string | null
- Video intro: URL (string | null) and/or uploaded file (storage path)
- Geographic reach: string
- Preferred event types: string[]
- Availability periods: array of objects:
  - { from: "YYYY-MM-DD", to: "YYYY-MM-DD", timezone: "Europe/Kiev", note?: string }

5) React UI: CompleteOrganizationProfile
- Create: src/features/profile/CompleteOrganizationProfile.tsx
- Controlled inputs, minimal clean UI (no external UI libs).
- Chips UI for arrays (topics, speaking formats, preferred event types) with add/remove and custom entry.
- Availability periods UI: add/remove rows an
::contentReference[oaicite:0]{index=0}



